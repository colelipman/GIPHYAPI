<!DOCTYPE html>
<html lang="en">

<head>
    <title>Sports Gifs</title>
    <!-- Latest compiled and minified CSS & JS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" integrity="sha384-1q8mTJOASx8j1Au+a5WDVnPi2lkFfwwEAa8hDDdjZlpLegxhjVME1fgjWPGmkzs7" crossorigin="anonymous">
    <link rel="stylesheet" type="text/css" href="assets/style.css">
  <meta charset="utf-8">
  <title>GIPHY Homework Cole</title>
</head>

<body>
  <!-- search box -->
  <div class="form-group">
      <label id="searchform" for="search"> Search GIF: </label>
      <input value="Search for your own GIFS here......" type="text" class="form-control" id="search-term">
  </div>
<!-- submit Button -->
  <p> <button onclick="searchFunction()" type="submit" class="btn btn-default" id="run-search search-term">
  <i class="fa fa-search"></i> Search</button>
</p>

<!-- pre-existing buttons -->
  <button data-sport="basketball">Basketball</button>
  <button data-sport="baseball">Baseball</button>
  <button data-sport="soccer">Soccer</button>
  <div id="gifs-appear-here"></div>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
  <script type="text/javascript">

        $("button").on("click", function() {
          var sport = $(this).attr("data-sport");
          var queryURL = "https://api.giphy.com/v1/gifs/search?q=" +
          sport + "&api_key=6tnlx9e9Nfk9t3GUwvm2Ss6FG3Wjf75S&limit=10";

        /////// AJAX //////
          $.ajax({
            url: queryURL,
            method: "GET"
          }).then(function(response) {
            var results = response.data;
            console.log(response);
            ///// loop the results //////
            for (var i = 0; i < results.length; i++) {

            //// Control the rating of GIFS displayed //////
              if (results[i].rating !== "r" && results[i].rating !== "pg-13") {
                var gifDiv = $("<div class='item'>");
                var rating = results[i].rating;
                var r = $("<p>").text("Rating: " + rating); ///paragraph displaying rating

                ////// Title Display//////
                var title = results[i].title;
                var t = $("<p>").text("Title: " + title); ///paragraph displaying title

                ///// Image display //////
                var image = $("<img>");
                image.attr("src", results[i].images.fixed_height.url);

                //// Animate or pause images /////
                image.attr("data-still", results[i].images.fixed_height_still.url);
                image.attr("data-animate", results[i].images.fixed_height.url);
                image.attr("data-state", "still");
                image.addClass('image');

                gifDiv.append(t);
                gifDiv.append(r);
                gifDiv.append(image);
                // Prepending the gifDiv to the "#gifs-appear-here" div in the HTML
                $("#gifs-appear-here").prepend(gifDiv);

              }
            }
          });
        });
     </script>

    <script src="https://code.jquery.com/jquery.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.0.0/js/bootstrap.bundle.min.js"></script>


</body>
</html>
